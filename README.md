# [WIP] Platonus API Wrapper - неофициальная Python библиотека для работы с Платонусом
[![Maintainability](https://api.codeclimate.com/v1/badges/7a4695ad3d671c96f922/maintainability)](https://codeclimate.com/github/ZhymabekRoman/platonus_api_wrapper/maintainability)
[![Requirements Status](https://requires.io/github/ZhymabekRoman/platonus_api_wrapper/requirements.svg?branch=main)](https://requires.io/github/ZhymabekRoman/platonus_api_wrapper/requirements/?branch=main)

Делаю то, что по определённым причинам не сделали разработчики Платонуса.

## ВНИМАНИЕ!
ПРОЕКТ В ПРОЦЕССЕ РАЗРАБОТКИ! ИСПОЛЬЗУЙТЕ НА СВОИ СТРАХ И РИСК

## Введение
Эта библиотека предоставляет Python интерфейс для никем незадокументированного и сделанного только для себя REST API Платонуса. Информации о REST API были получены путем обратной разработки веб приложении и Android клиента, так как в свободном доступе нету ни исходников Платонуса, ни документации (комерческая тайна).

## Мотивация
Идея создания своей библиотеки-обертки над Платонусом пришло после несколько месяцев мучении во время использовании веб интерфейса. Веб интерфейс очень кривой, имеет очень огромное количество багов, и написан с использованием таких тяжелых веб-технологии как Bootstrap, Angular и Jquery, соответственно это очень сильно сказывается на скорость загрузки страницы и времени. У меня увы очень слабый ноутбук (не спрашивайте почему), на процессоре Celeron, и Платонус загружается катастрофически медленно, и я решил написать бота для Telegram. Но как выяснилось позже, готовых реализации REST API Платонуса нету. Тут я загорелся идеей сделать это.

## Замечание
0) **Я учусь в колледже и имею доступ только к возможностям студента и не более, соответственно в библиотеке реализован только функционал студента - я не могу реализовать то, к чему я не имею доступ. Ни функции учителя, ни админа не реаизовано, т.к. надо имеет доступ к этим фнукциям и смотреть поведение каждого обьекта/функции. Если у кого-то есть доступ к админ или учительской панели Платонуса, и есть желание реализовать это в библиотеке, просьба помочь.**
1) **Так же проблема описанная в пункте №0, касается и для учащихся университета, но думаю большинство методов/функции/JSON ответов похожы с колледжом. Но самое главное лед сломан, путь открыт, дорога показана.**
2) **Еще одна проблема - Платонус имеет очень много версии: начиная от ~2.00 до ~5.70, и предусмотреть всё и все изменении не возможно, это усложняется тем что нету документации. Например адресс REST API метода `menuTimeDate`, который возвращает серверное время Платонуса, менялся в разных версиях Платонуса, пока точно не известно, в каких конкретных версиях;** Подробнее см. код ниже:

```
...
    def server_time(self):
        if self.rest_api_version.version <= 2.0 or self.rest_api_version.version >= 5.0:
            return "menuTimeDate"
        else:
            return f"rest/api/menu/menu_time_date/{self.language_code_str}"
...
```

## Установка
В данное время Вы можете установить библиотеку из исходного кода с помощью pip3:
```
python3 -m pip install https://github.com/ZhymabekRoman/platonus_api_wrapper/archive/main.zip
```

Или же напрямую через setup.py:
```
$ git clone https://github.com/ZhymabekRoman/platonus-api-wrapper --recursive
$ cd platonus-api-wrapper
$ python3 setup.py install
```

Upd. март 2021: в данное время не возможно установить пакет, т.к. есть один не решенный баг, который никак не хочет фиксится, пока что временно найден костыль для решения проблема: https://github.com/ZhymabekRoman/platonus_api_wrapper/issues/4

## Начало работы
Для работы с бибилотекой нужно впервую очередь импортировать и инициализировать экземпляр класса PlatonusAPI и в качестве аргументов передать главный адресс Платонуса:
```
import logging
from platonus_api_wrapper import PlatonusAPI

logging.basicConfig(level=logging.DEBUG)

platonus_session = PlatonusAPI(http://test4.platonus.kz)
...
```

Больше кода вы можете найти в файле test.py

## Документация
В данное время документация хранится в Wiki Github проекта, конечно можно было где-нибудь в другом месте опубликовать, но пока что оставим так: https://github.com/ZhymabekRoman/platonus_api_wrapper/wiki
На март 2021 работа над документацией не начата

## Todo
- [ ] Написать документацию
- [ ] Валидация JSON данных через pydantic (А нужно ли?). Под вопросом, см. секцию #Замечание
- [ ] Загрузить пакет в Pypi. Честно, я не хочу засорять PyPi, так что .... скоее всего нет
- [ ] Реализовать оставшиеся незадокументированные REST API методы. Под вопросом, см. секцию #Замечание

## Разработанные проекты / Рабочие примеры использования библиотеки
### Небольшой Телеграм бот для работы с Платонусом
В данное время бот находится в разработке, но авторизоватся и посмотреть список задании можно посмотреть =)
Исходный код: https://github.com/ZhymabekRoman/PlatonusTelegramBot

## Внесение своего вклада в проект
Внесение своего вклада максимально приветствуется! Есть перечень пунктов, который стоит соблюдать. Каждый пункт перечня расписан в CONTRIBUTING.
